!function(t,o){function e(){T||(T={verbose:!1,queryLimit:{attempt:5,delay:250,random:250},classes:{Map:google.maps.Map,Marker:google.maps.Marker,InfoWindow:google.maps.InfoWindow,Circle:google.maps.Circle,Rectangle:google.maps.Rectangle,OverlayView:google.maps.OverlayView,StreetViewPanorama:google.maps.StreetViewPanorama,KmlLayer:google.maps.KmlLayer,TrafficLayer:google.maps.TrafficLayer,BicyclingLayer:google.maps.BicyclingLayer,GroundOverlay:google.maps.GroundOverlay,StyledMapType:google.maps.StyledMapType,ImageMapType:google.maps.ImageMapType},map:{mapTypeId:google.maps.MapTypeId.ROADMAP,center:[46.578498,2.457275],zoom:2},overlay:{pane:"floatPane",content:"",offset:{x:0,y:0}},geoloc:{getCurrentPosition:{maximumAge:6e4,timeout:5e3}}})}function n(t,e){return t!==o?t:"gmap3_"+(e?E+1:++E)}function i(o,e,n,i,s){if(e.todo.events||e.todo.onces)var a={id:i,data:e.todo.data,tag:e.todo.tag};e.todo.events&&t.each(e.todo.events,function(t,e){google.maps.event.addListener(n,t,function(t){e.apply(o,[s?s:n,t,a])})}),e.todo.onces&&t.each(e.todo.onces,function(t,e){google.maps.event.addListenerOnce(n,t,function(t){e.apply(o,[s?s:n,t,a])})})}function s(){var t=[];this.empty=function(){return!t.length},this.add=function(o){t.push(o)},this.get=function(){return t.length?t[0]:!1},this.ack=function(){t.shift()}}function a(o,e,n){function i(t){var o={};return o[t]={},o}function s(){var t;for(t in n)if(!(t in r))return t}var a,r={},l=this,u={latLng:{map:!1,marker:!1,infowindow:!1,circle:!1,overlay:!1,getlatlng:!1,getmaxzoom:!1,getelevation:!1,streetviewpanorama:!1,getaddress:!0},geoloc:{getgeoloc:!0}};"string"==typeof n&&(n=i(n)),this.run=function(){for(var i,l;i=s();){if("function"==typeof o[i])return a=i,l=t.extend(!0,{},T[i]||{},n[i].options||{}),void(i in u.latLng?n[i].values?P(n[i].values,o,o[i],{todo:n[i],opts:l,session:r}):B(o,o[i],u.latLng[i],{todo:n[i],opts:l,session:r}):i in u.geoloc?S(o,o[i],{todo:n[i],opts:l,session:r}):o[i].apply(o,[{todo:n[i],opts:l,session:r}]));r[i]=null}e.apply(o,[n,r])},this.ack=function(t){r[a]=t,l.run.apply(l,[])}}function r(t){var o,e=[];for(o in t)e.push(o);return e}function l(o,e){var n={};if(o.todo)for(var i in o.todo)"options"!==i&&"values"!==i&&(n[i]=o.todo[i]);var s,a=["data","tag","id","events","onces"];for(s=0;s<a.length;s++)u(n,a[s],e,o.todo);return n.options=t.extend({},o.todo.options||{},e.options||{}),n}function u(t,o){for(var e=2;e<arguments.length;e++)if(o in arguments[e])return void(t[o]=arguments[e][o])}function c(){var t=[];this.get=function(o){if(t.length){var e,n,i,s,a,l=r(o);for(e=0;e<t.length;e++){for(s=t[e],a=l.length==s.keys.length,n=0;n<l.length&&a;n++)i=l[n],a=i in s.request,a&&(a="object"==typeof o[i]&&"equals"in o[i]&&"function"==typeof o[i]?o[i].equals(s.request[i]):o[i]===s.request[i]);if(a)return s.results}}},this.store=function(o,e){t.push({request:o,keys:r(o),results:e})}}function p(o,e,n,i){var s=this,a=[];T.classes.OverlayView.call(this),this.setMap(o),this.onAdd=function(){var o=this.getPanes();e.pane in o&&t(o[e.pane]).append(i),t.each("dblclick click mouseover mousemove mouseout mouseup mousedown".split(" "),function(o,e){a.push(google.maps.event.addDomListener(i[0],e,function(o){t.Event(o).stopPropagation(),google.maps.event.trigger(s,e,[o])}))}),a.push(google.maps.event.addDomListener(i[0],"contextmenu",function(o){t.Event(o).stopPropagation(),google.maps.event.trigger(s,"rightclick",[o])})),this.draw()},this.getPosition=function(){return n},this.draw=function(){this.draw=function(){var t=this.getProjection().fromLatLngToDivPixel(n);i.css("left",t.x+e.offset.x+"px").css("top",t.y+e.offset.y+"px")}},this.onRemove=function(){for(var t=0;t<a.length;t++)google.maps.event.removeListener(a[t]);i.remove()},this.hide=function(){i.hide()},this.show=function(){i.show()},this.toggle=function(){i&&(i.is(":visible")?this.show():this.hide())},this.toggleDOM=function(){this.setMap(this.getMap()?null:o)},this.getDOMElement=function(){return i[0]}}function d(t){function o(){return this.onAdd=function(){},this.onRemove=function(){},this.draw=function(){},T.classes.OverlayView.apply(this,[])}o.prototype=T.classes.OverlayView.prototype;var e=new o;return e.setMap(t),e}function g(e,s,a,r){function l(){return(y=A.getProjection())?(I=!0,S.push(google.maps.event.addListener(s,"zoom_changed",function(){f()})),S.push(google.maps.event.addListener(s,"bounds_changed",function(){f()})),void m()):void setTimeout(function(){l.apply(P,[])},25)}function u(t){"object"==typeof j[t]?("function"==typeof j[t].obj.setMap&&j[t].obj.setMap(null),"function"==typeof j[t].obj.remove&&j[t].obj.remove(),"function"==typeof j[t].shadow.remove&&j[t].obj.remove(),"function"==typeof j[t].shadow.setMap&&j[t].shadow.setMap(null),delete j[t].obj,delete j[t].shadow):T[t]&&T[t].setMap(null),delete j[t]}function c(){var t,o,e,n,i,s,a,r;return arguments[0]instanceof google.maps.LatLng?(t=arguments[0].lat(),e=arguments[0].lng(),arguments[1]instanceof google.maps.LatLng?(o=arguments[1].lat(),n=arguments[1].lng()):(o=arguments[1],n=arguments[2])):(t=arguments[0],e=arguments[1],arguments[2]instanceof google.maps.LatLng?(o=arguments[2].lat(),n=arguments[2].lng()):(o=arguments[2],n=arguments[3])),i=Math.PI*t/180,s=Math.PI*e/180,a=Math.PI*o/180,r=Math.PI*n/180,6371e3*Math.acos(Math.min(Math.cos(i)*Math.cos(a)*Math.cos(s)*Math.cos(r)+Math.cos(i)*Math.sin(s)*Math.cos(a)*Math.sin(r)+Math.sin(i)*Math.sin(a),1))}function p(){var t=c(s.getCenter(),s.getBounds().getNorthEast()),o=new google.maps.Circle({center:s.getCenter(),radius:1.25*t});return o.getBounds()}function g(){var t,o={};for(t in j)o[t]=!0;return o}function f(){clearTimeout(v),v=setTimeout(function(){m()},25)}function h(t){var o=y.fromLatLngToDivPixel(t),e=y.fromDivPixelToLatLng(new google.maps.Point(o.x+a,o.y-a)),n=y.fromDivPixelToLatLng(new google.maps.Point(o.x-a,o.y+a));return new google.maps.LatLngBounds(n,e)}function m(){if(!M&&!k&&I){var e,n,i,a,l,c,d,f,m,v=[],y={},b=s.getZoom(),P=r!==o&&b>r,S=g(),O=!1;for(x=!1,b>3&&(f=p(),O=f.getSouthWest().lng()<f.getNorthEast().lng()),t.each(E,function(t,o){o&&(!O||f.contains(o.options.position))&&(!w||w(C[t]))&&v.push(t)});;){for(e=0;y[e]&&e<v.length;)e++;if(e==v.length)break;if(c=[],B&&!P){do{if(d=c,c=[],d.length){for(a=l=0,i=0;i<d.length;i++)a+=E[v[d[i]]].options.position.lat(),l+=E[v[d[i]]].options.position.lng();a/=d.length,l/=d.length,f=h(new google.maps.LatLng(a,l))}else f=h(E[v[e]].options.position);for(n=e;n<v.length;n++)y[n]||f.contains(E[v[n]].options.position)&&c.push(n)}while(d.length<c.length&&c.length>1)}else for(n=e;n<v.length;n++)if(!y[n]){c.push(n);break}for(m={latLng:f.getCenter(),indexes:[],ref:[]},i=0;i<c.length;i++)y[c[i]]=!0,m.indexes.push(v[c[i]]),m.ref.push(v[c[i]]);m.ref=m.ref.join("-"),m.ref in S?delete S[m.ref]:(1===c.length&&(j[m.ref]=!0),function(t){setTimeout(function(){L(t)},1)}(m))}t.each(S,function(t){u(t)}),k=!1}}var v,y,w,L,b,M=!1,x=!1,k=!1,I=!1,B=!0,P=this,S=[],j={},O={},T=[],E=[],C=[],A=d(s);l(),this.getById=function(t){return t in O?T[O[t]]:!1},this.clearById=function(t){if(t in O){var o=O[t];T[o]&&T[o].setMap(null),delete T[o],T[o]=!1,delete E[o],E[o]=!1,delete C[o],C[o]=!1,delete O[t],x=!0}},this.add=function(t,o){t.id=n(t.id),this.clearById(t.id),O[t.id]=T.length,T.push(null),E.push(t),C.push(o),x=!0},this.addMarker=function(t,o){o=o||{},o.id=n(o.id),this.clearById(o.id),o.options||(o.options={}),o.options.position=t.getPosition(),i(e,{todo:o},t,o.id),O[o.id]=T.length,T.push(t),E.push(o),C.push(o.data||{}),x=!0},this.todo=function(t){return E[t]},this.value=function(t){return C[t]},this.marker=function(t){return T[t]},this.setMarker=function(t,o){T[t]=o},this.store=function(t,o,e){j[t.ref]={obj:o,shadow:e}},this.free=function(){for(var o=0;o<S.length;o++)google.maps.event.removeListener(S[o]);S=[],t.each(j,function(t){u(t)}),j={},t.each(E,function(t){E[t]=null}),E=[],t.each(T,function(t){T[t]&&(T[t].setMap(null),delete T[t])}),T=[],t.each(C,function(t){delete C[t]}),C=[],O={}},this.filter=function(t){w=t,m()},this.enable=function(t){B!=t&&(B=t,m())},this.display=function(t){L=t},this.error=function(t){b=t},this.beginUpdate=function(){M=!0},this.endUpdate=function(){M=!1,x&&m()}}function f(t,o){this.id=function(){return t},this.filter=function(t){o.filter(t)},this.enable=function(){o.enable(!0)},this.disable=function(){o.enable(!1)},this.add=function(t,e,n){n||o.beginUpdate(),o.addMarker(t,e),n||o.endUpdate()},this.getById=function(t){return o.getById(t)},this.clearById=function(t,e){e||o.beginUpdate(),o.clearById(t),e||o.endUpdate()}}function h(){function e(e){return e?"function"==typeof e?e:(e=x(e),function(n){if(n===o)return!1;if("object"==typeof n){for(var i=0;i<n.length;i++)if(t.inArray(n[i],e)>=0)return!0;return!1}return t.inArray(n,e)>=0}):void 0}function i(t){return{id:t.id,name:t.name,object:t.obj,tag:t.tag,data:t.data}}function s(t){"function"==typeof t.setMap&&t.setMap(null),"function"==typeof t.remove&&t.remove(),"function"==typeof t.free&&t.free(),t=null}var a={},r={};this.add=function(t,o,e,i){var s=t.todo||{},l=n(s.id);return a[o]||(a[o]=[]),l in r&&this.clearById(l),r[l]={obj:e,sub:i,name:o,id:l,tag:s.tag,data:s.data},a[o].push(l),l},this.getById=function(t,o,e){return t in r?o?r[t].sub:e?i(r[t]):r[t].obj:!1},this.get=function(t,o,n,s){var l,u,c=e(n);if(!a[t]||!a[t].length)return null;for(l=a[t].length;l;)if(l--,u=a[t][o?l:a[t].length-l-1],u&&r[u]){if(c&&!c(r[u].tag))continue;return s?i(r[u]):r[u].obj}return null},this.all=function(t,n,s){var l=[],u=e(n),c=function(t){var o,e;for(o=0;o<a[t].length;o++)if(e=a[t][o],e&&r[e]){if(u&&!u(r[e].tag))continue;l.push(s?i(r[e]):r[e].obj)}};if(t in a)c(t);else if(t===o)for(t in a)c(t);return l},this.rm=function(t,o,e){var n,i;if(!a[t])return!1;if(o)if(e)for(n=a[t].length-1;n>=0&&(i=a[t][n],!o(r[i].tag));n--);else for(n=0;n<a[t].length&&(i=a[t][n],!o(r[i].tag));n++);else n=e?a[t].length-1:0;return n in a[t]?this.clearById(a[t][n],n):!1},this.clearById=function(t,e){if(t in r){var n,i=r[t].name;for(n=0;e===o&&n<a[i].length;n++)t===a[i][n]&&(e=n);return s(r[t].obj),r[t].sub&&s(r[t].sub),delete r[t],a[i].splice(e,1),!0}return!1},this.objGetById=function(t){var o;if(a.clusterer)for(var e in a.clusterer)if((o=r[a.clusterer[e]].obj.getById(t))!==!1)return o;return!1},this.objClearById=function(t){if(a.clusterer)for(var o in a.clusterer)if(r[a.clusterer[o]].obj.clearById(t))return!0;return null},this.clear=function(t,o,n,i){var s,r,l,u=e(i);if(t&&t.length)t=x(t);else{t=[];for(s in a)t.push(s)}for(r=0;r<t.length;r++)if(t[r]){if(l=t[r],!a[l])continue;if(o)this.rm(l,u,!0);else if(n)this.rm(l,u,!1);else for(;this.rm(l,u,!1););}}}function m(){return C.geocoder||(C.geocoder=new google.maps.Geocoder),C.geocoder}function v(){return C.directionsService||(C.directionsService=new google.maps.DirectionsService),C.directionsService}function y(){return C.elevationService||(C.elevationService=new google.maps.ElevationService),C.elevationService}function w(){return C.maxZoomService||(C.maxZoomService=new google.maps.MaxZoomService),C.maxZoomService}function L(){return C.distanceMatrixService||(C.distanceMatrixService=new google.maps.DistanceMatrixService),C.distanceMatrixService}function b(){if(T.verbose){var t,o=[];if(window.console&&"function"==typeof console.error){for(t=0;t<arguments.length;t++)o.push(arguments[t]);console.error.apply(console,o)}else{for(o="",t=0;t<arguments.length;t++)o+=arguments[t].toString()+" ";alert(o)}}}function M(t){return("number"==typeof t||"string"==typeof t)&&""!==t&&!isNaN(t)}function x(t){var e,n=[];if(t!==o)if("object"==typeof t)if("number"==typeof t.length)n=t;else for(e in t)n.push(t[e]);else n.push(t);return n}function k(o,e,n){var i=e?o:null;return o&&"string"!=typeof o?o.latLng?k(o.latLng):o instanceof google.maps.LatLng?o:M(o.lat)?new google.maps.LatLng(o.lat,o.lng):!n&&t.isArray(o)&&M(o[0])&&M(o[1])?new google.maps.LatLng(o[0],o[1]):i:i}function I(o){var e,n;return!o||o instanceof google.maps.LatLngBounds?o||null:(t.isArray(o)?2==o.length?(e=k(o[0]),n=k(o[1])):4==o.length&&(e=k([o[0],o[1]]),n=k([o[2],o[3]])):"ne"in o&&"sw"in o?(e=k(o.ne),n=k(o.sw)):"n"in o&&"e"in o&&"s"in o&&"w"in o&&(e=k([o.n,o.e]),n=k([o.s,o.w])),e&&n?new google.maps.LatLngBounds(n,e):null)}function B(t,o,e,n,i){var s=e?k(n.todo,!1,!0):!1,a=s?{latLng:s}:n.todo.address?"string"==typeof n.todo.address?{address:n.todo.address}:n.todo.address:!1,r=a?A.get(a):!1,l=this;a?(i=i||0,r?(n.latLng=r.results[0].geometry.location,n.results=r.results,n.status=r.status,o.apply(t,[n])):(a.location&&(a.location=k(a.location)),a.bounds&&(a.bounds=I(a.bounds)),m().geocode(a,function(s,r){r===google.maps.GeocoderStatus.OK?(A.store(a,{results:s,status:r}),n.latLng=s[0].geometry.location,n.results=s,n.status=r,o.apply(t,[n])):r===google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&i<T.queryLimit.attempt?setTimeout(function(){B.apply(l,[t,o,e,n,i+1])},T.queryLimit.delay+Math.floor(Math.random()*T.queryLimit.random)):(b("geocode failed",r,a),n.latLng=n.results=!1,n.status=r,o.apply(t,[n]))}))):(n.latLng=k(n.todo,!1,!0),o.apply(t,[n]))}function P(o,e,n,i){function s(){do r++;while(r<o.length&&!("address"in o[r]));return r>=o.length?void n.apply(e,[i]):void B(a,function(e){delete e.todo,t.extend(o[r],e),s.apply(a,[])},!0,{todo:o[r]})}var a=this,r=-1;s()}function S(t,o,e){var n=!1;navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(function(i){n||(n=!0,e.latLng=new google.maps.LatLng(i.coords.latitude,i.coords.longitude),o.apply(t,[e]))},function(){n||(n=!0,e.latLng=!1,o.apply(t,[e]))},e.opts.getCurrentPosition):(e.latLng=!1,o.apply(t,[e]))}function j(e){function r(){!P&&(P=j.get())&&P.run()}function u(){P=null,j.ack(),r.call(S)}function c(o){var n,i=[];for(n=1;n<arguments.length;n++)i.push(arguments[n]);"function"==typeof o.todo.callback?o.todo.callback.apply(e,i):"object"==typeof o.todo.callback&&t.each(o.todo.callback,function(t,o){"function"==typeof o&&o.apply(e,i)})}function d(t,o,n){n&&i(e,t,o,n),c(t,o),P.ack(o)}function m(o,n){if(n=n||{},E)n.todo&&n.todo.options&&E.setOptions(n.todo.options);else{var i=n.opts||t.extend(!0,{},T.map,n.todo&&n.todo.options?n.todo.options:{});i.center=o||k(i.center),E=new T.classes.Map(e.get(0),i)}}function M(o,n,s){var a=[],r="values"in o.todo;return r||(o.todo.values=[{options:o.opts}]),o.todo.values.length?(m(),t.each(o.todo.values,function(r,u){var c,p,d,g,f=l(o,u);if(f.options[s])if(f.options[s][0][0]&&t.isArray(f.options[s][0][0]))for(p=0;p<f.options[s].length;p++)for(d=0;d<f.options[s][p].length;d++)f.options[s][p][d]=k(f.options[s][p][d]);else for(p=0;p<f.options[s].length;p++)f.options[s][p]=k(f.options[s][p]);f.options.map=E,g=new google.maps[n](f.options),a.push(g),c=O.add({todo:f},n.toLowerCase(),g),i(e,{todo:f},g,c)}),void d(o,r?a:a[0])):void d(o,!1)}function B(n){var s,a,r=new g(e,E,n.radius,n.maxZoom),l={},u={},c=/^[0-9]+$/;for(a in n)c.test(a)?(u[a]=n[a],u[a].width=u[a].width||0,u[a].height=u[a].height||0):l[a]=n[a];return s=l.calculator?function(o){var n=[];return t.each(o,function(t,o){n.push(r.value(o))}),l.calculator.apply(e,[n])}:function(t){return t.length},r.error(function(){b.apply(S,arguments)}),r.display(function(n){var a,c,p,d,g,f=0,h=s(n.indexes);if(h>1){for(a in u)a=1*a,a>f&&h>=a&&(f=a);c=u[f]}c?(g=c.offset||[-c.width/2,-c.height/2],p=t.extend({},l),p.options=t.extend({pane:"overlayLayer",content:c.content?c.content.replace("CLUSTER_COUNT",h):"",offset:{x:("x"in g?g.x:g[0])||0,y:("y"in g?g.y:g[1])||0}},l.options||{}),d=S.overlay({todo:p,opts:p.options,latLng:k(n)},!0),p.options.pane="floatShadow",p.options.content=t(document.createElement("div")).width(c.width+"px").height(c.height+"px"),shadow=S.overlay({todo:p,opts:p.options,latLng:k(n)},!0),l.data={latLng:k(n),markers:[]},t.each(n.indexes,function(t,o){l.data.markers.push(r.value(o)),r.marker(o)&&r.marker(o).setMap(null)}),i(e,{todo:l},shadow,o,{main:d,shadow:shadow}),r.store(n,d,shadow)):t.each(n.indexes,function(t,o){if(r.marker(o))r.marker(o).setMap(E);else{var n=r.todo(o),s=new T.classes.Marker(n.options);r.setMarker(o,s),i(e,{todo:n},s,n.id)}})}),r}var P,S=this,j=new s,O=new h,E=null;this._plan=function(t){for(var o=0;o<t.length;o++)j.add(new a(S,u,t[o]));r()},this.map=function(t){m(t.latLng,t),i(e,t,E),d(t,E)},this.destroy=function(t){O.clear(),e.empty(),E&&(E=null),d(t,!0)},this.infowindow=function(n){var s=[],a="values"in n.todo;a||(n.latLng?n.opts.position=n.latLng:n.opts.position&&(n.opts.position=k(n.opts.position)),n.todo.values=[{options:n.opts}]),t.each(n.todo.values,function(t,r){var u,c,p=l(n,r);E||m(p.options.position),c=new T.classes.InfoWindow(p.options),c&&(p.open===o||p.open)&&(a?c.open(E,p.anchor?p.anchor:o):c.open(E,p.anchor?p.anchor:n.latLng?o:n.session.marker?n.session.marker:o)),s.push(c),u=O.add({todo:p},"infowindow",c),i(e,{todo:p},c,u)}),d(n,a?s:s[0])},this.circle=function(o){var n=[],s="values"in o.todo;return s||(o.opts.center=o.latLng||k(o.opts.center),o.todo.values=[{options:o.opts}]),o.todo.values.length?(t.each(o.todo.values,function(t,s){var a,r,u=l(o,s);u.options.center=k(u.options.center?u.options.center:s),E||m(u.options.center),u.options.map=E,r=new T.classes.Circle(u.options),n.push(r),a=O.add({todo:u},"circle",r),i(e,{todo:u},r,a)}),void d(o,s?n:n[0])):void d(o,!1)},this.overlay=function(o,e){var n,i,s=t(document.createElement("div")).css("border","none").css("borderWidth","0px").css("position","absolute");return s.append(o.opts.content),p.prototype=new T.classes.OverlayView,i=new p(E,o.opts,o.latLng,s),s=null,e?i:(n=O.add(o,"overlay",i),void d(o,i,n))},this.getaddress=function(t){c(t,t.results,t.status),P.ack()},this.getlatlng=function(t){c(t,t.results,t.status),P.ack()},this.getmaxzoom=function(t){w().getMaxZoomAtLatLng(t.latLng,function(o){c(t,o.status===google.maps.MaxZoomStatus.OK?o.zoom:!1,status),P.ack()})},this.getelevation=function(t){var o,e=[],n=function(o,e){c(t,e===google.maps.ElevationStatus.OK?o:!1,e),P.ack()};if(t.latLng)e.push(t.latLng);else for(e=x(t.todo.locations||[]),o=0;o<e.length;o++)e[o]=k(e[o]);if(e.length)y().getElevationForLocations({locations:e},n);else{if(t.todo.path&&t.todo.path.length)for(o=0;o<t.todo.path.length;o++)e.push(k(t.todo.path[o]));e.length?y().getElevationAlongPath({path:e,samples:t.todo.samples},n):P.ack()}},this.defaults=function(o){t.each(o.todo,function(o,e){T[o]="object"==typeof T[o]?t.extend({},T[o],e):e}),P.ack(!0)},this.rectangle=function(o){var n=[],s="values"in o.todo;return s||(o.todo.values=[{options:o.opts}]),o.todo.values.length?(t.each(o.todo.values,function(t,s){var a,r,u=l(o,s);u.options.bounds=I(u.options.bounds?u.options.bounds:s),E||m(u.options.bounds.getCenter()),u.options.map=E,r=new T.classes.Rectangle(u.options),n.push(r),a=O.add({todo:u},"rectangle",r),i(e,{todo:u},r,a)}),void d(o,s?n:n[0])):void d(o,!1)},this.polyline=function(t){M(t,"Polyline","path")},this.polygon=function(t){M(t,"Polygon","paths")},this.trafficlayer=function(t){m();var o=O.get("trafficlayer");o||(o=new T.classes.TrafficLayer,o.setMap(E),O.add(t,"trafficlayer",o)),d(t,o)},this.bicyclinglayer=function(t){m();var o=O.get("bicyclinglayer");o||(o=new T.classes.BicyclingLayer,o.setMap(E),O.add(t,"bicyclinglayer",o)),d(t,o)},this.groundoverlay=function(t){t.opts.bounds=I(t.opts.bounds),t.opts.bounds&&m(t.opts.bounds.getCenter());var o,e=new T.classes.GroundOverlay(t.opts.url,t.opts.bounds,t.opts.opts);e.setMap(E),o=O.add(t,"groundoverlay",e),d(t,e,o)},this.streetviewpanorama=function(o){o.opts.opts||(o.opts.opts={}),o.latLng?o.opts.opts.position=o.latLng:o.opts.opts.position&&(o.opts.opts.position=k(o.opts.opts.position)),o.todo.divId?o.opts.container=document.getElementById(o.todo.divId):o.opts.container&&(o.opts.container=t(o.opts.container).get(0));var e,n=new T.classes.StreetViewPanorama(o.opts.container,o.opts.opts);n&&E.setStreetView(n),e=O.add(o,"streetviewpanorama",n),d(o,n,e)},this.kmllayer=function(o){var n=[],s="values"in o.todo;return s||(o.todo.values=[{options:o.opts}]),o.todo.values.length?(t.each(o.todo.values,function(t,s){var a,r,u=l(o,s);E||m(),u.options.opts.map=E,r=new T.classes.KmlLayer(u.options.url,u.options.opts),n.push(r),a=O.add({todo:u},"kmllayer",r),i(e,{todo:u},r,a)}),void d(o,s?n:n[0])):void d(o,!1)},this.panel=function(n){m();var i,s,a=0,r=0,l=t(document.createElement("div"));l.css("position","absolute").css("z-index","1000"),n.opts.content&&(s=t(n.opts.content),n.opts.left!==o?a=n.opts.left:n.opts.right!==o?a=e.width()-s.width()-n.opts.right:n.opts.center&&(a=(e.width()-s.width())/2),n.opts.top!==o?r=n.opts.top:n.opts.bottom!==o?r=e.height()-s.height()-n.opts.bottom:n.opts.middle&&(r=(e.height()-s.height())/2),l.css("top",r+"px").css("left",a+"px").append(s)),e.first().prepend(l),i=O.add(n,"panel",l),d(n,l,i),l=null},this.marker=function(o){var s="values"in o.todo,a=!E;if(s||(o.opts.position=o.latLng||k(o.opts.position),o.todo.values=[{options:o.opts}]),!o.todo.values.length)return void d(o,!1);if(a&&m(),o.todo.cluster&&!E.getBounds())return void google.maps.event.addListenerOnce(E,"bounds_changed",function(){S.marker.apply(S,[o])});if(o.todo.cluster){var r,u;o.todo.cluster instanceof f?(r=o.todo.cluster,u=O.getById(r.id(),!0)):(u=B(o.todo.cluster),r=new f(n(o.todo.id,!0),u),O.add(o,"clusterer",r,u)),u.beginUpdate(),t.each(o.todo.values,function(t,e){var n=l(o,e);n.options.position=k(n.options.position?n.options.position:e),n.options.map=E,a&&(E.setCenter(n.options.position),a=!1),u.add(n,e)}),u.endUpdate(),d(o,r)}else{var c=[];t.each(o.todo.values,function(t,n){var s,r,u=l(o,n);u.options.position=k(u.options.position?u.options.position:n),u.options.map=E,a&&(E.setCenter(u.options.position),a=!1),r=new T.classes.Marker(u.options),c.push(r),s=O.add({todo:u},"marker",r),i(e,{todo:u},r,s)}),d(o,s?c:c[0])}},this.getroute=function(t){t.opts.origin=k(t.opts.origin,!0),t.opts.destination=k(t.opts.destination,!0),v().route(t.opts,function(o,e){c(t,e==google.maps.DirectionsStatus.OK?o:!1,e),P.ack()})},this.directionsrenderer=function(o){o.opts.map=E;var e,n=new google.maps.DirectionsRenderer(o.opts);o.todo.divId?n.setPanel(document.getElementById(o.todo.divId)):o.todo.container&&n.setPanel(t(o.todo.container).get(0)),e=O.add(o,"directionrenderer",n),d(o,n,e)},this.getgeoloc=function(t){d(t,t.latLng)},this.styledmaptype=function(t){m();var o=new T.classes.StyledMapType(t.todo.styles,t.opts);E.mapTypes.set(t.todo.id,o),d(t,o)},this.imagemaptype=function(t){m();var o=new T.classes.ImageMapType(t.opts);E.mapTypes.set(t.todo.id,o),d(t,o)},this.autofit=function(o){var e=new google.maps.LatLngBounds;t.each(O.all(),function(t,o){o.getPosition?e.extend(o.getPosition()):o.getBounds?(e.extend(o.getBounds().getNorthEast()),e.extend(o.getBounds().getSouthWest())):o.getPaths?o.getPaths().forEach(function(t){t.forEach(function(t){e.extend(t)})}):o.getPath?o.getPath().forEach(function(t){e.extend(t)}):o.getCenter&&e.extend(o.getCenter())}),e.isEmpty()||E.getBounds()&&E.getBounds().equals(e)||("maxZoom"in o.todo&&google.maps.event.addListenerOnce(E,"bounds_changed",function(){this.getZoom()>o.todo.maxZoom&&this.setZoom(o.todo.maxZoom)}),E.fitBounds(e)),d(o,!0)},this.clear=function(o){if("string"==typeof o.todo){if(O.clearById(o.todo)||O.objClearById(o.todo))return void d(o,!0);o.todo={name:o.todo}}o.todo.id?t.each(x(o.todo.id),function(t,o){O.clearById(o)}):O.clear(x(o.todo.name),o.todo.last,o.todo.first,o.todo.tag),d(o,!0)},this.exec=function(o){var n=this;t.each(x(o.todo.func),function(i,s){t.each(n.get(o.todo,!0,o.todo.hasOwnProperty("full")?o.todo.full:!0),function(t,o){s.call(e,o)})}),d(o,!0)},this.get=function(e,n,i){var s,a,r=n?e:e.todo;return n||(i=r.full),"string"==typeof r?(a=O.getById(r,!1,i)||O.objGetById(r),a===!1&&(s=r,r={})):s=r.name,"map"===s&&(a=E),a||(a=[],r.id?(t.each(x(r.id),function(t,o){a.push(O.getById(o,!1,i)||O.objGetById(o))}),t.isArray(r.id)||(a=a[0])):(t.each(s?x(s):[o],function(o,e){var n;r.first?(n=O.get(e,!1,r.tag,i),n&&a.push(n)):r.all?t.each(O.all(e,r.tag,i),function(t,o){a.push(o)}):(n=O.get(e,!0,r.tag,i),n&&a.push(n))}),r.all||t.isArray(s)||(a=a[0]))),a=t.isArray(a)||!r.all?a:[a],n?a:void d(e,a)},this.getdistance=function(t){var o;for(t.opts.origins=x(t.opts.origins),o=0;o<t.opts.origins.length;o++)t.opts.origins[o]=k(t.opts.origins[o],!0);for(t.opts.destinations=x(t.opts.destinations),o=0;o<t.opts.destinations.length;o++)t.opts.destinations[o]=k(t.opts.destinations[o],!0);L().getDistanceMatrix(t.opts,function(o,e){c(t,e===google.maps.DistanceMatrixStatus.OK?o:!1,e),P.ack()})},this.trigger=function(o){if("string"==typeof o.todo)google.maps.event.trigger(E,o.todo);else{var e=[E,o.todo.eventName];o.todo.var_args&&t.each(o.todo.var_args,function(t,o){e.push(o)}),google.maps.event.trigger.apply(google.maps.event,e)}c(o),P.ack()}}function O(t){var o;if(!t.hasOwnProperty("get"))return!1;for(o in t)if("get"!==o)return!1;return!t.get.hasOwnProperty("callback")}var T,E=0,C={},A=new c;t.fn.gmap3=function(){var o,n=[],i=!0,s=[];for(e(),o=0;o<arguments.length;o++)arguments[o]&&n.push(arguments[o]);return n.length||n.push("map"),t.each(this,function(){var o=t(this),e=o.data("gmap3");i=!1,e||(e=new j(o),o.data("gmap3",e)),1!==n.length||"get"!==n[0]&&!O(n[0])?e._plan(n):s.push(e.get("get"===n[0]?"map":n[0].get,!0))}),s.length?1===s.length?s[0]:s:this}}(jQuery);